(function() {function Zap(){}window.Zap=Zap;(function(c){var b=function(a,d,g){this.h=a;this.w=d;this.zap=g;this.wires=[];this.placements=[];return this};b.prototype.render=function(a){var d=a.append("svg").attr("width",this.w).attr("height",this.h);this.wires.forEach(function(a){console.log("wire",a);a.render(d)});this.placements.forEach(function(a){console.log("component",a);a.component.render(d)})};b.prototype.place=function(a,d,b){a.place(d,b);this.placements.push({component:a,x:d,y:b})};c.prototype.createView=function(a,d){return new b(a,
d,this)}})(Zap);(function(c){var b=function(a){this.voltage=a;this.in={x:0,y:0};this.out={x:0,y:0};this.y=this.x=this.rotation=0;b.prototype.calculateTerminals=function(){var a=this.rotation%360;if(0===a)this.in={x:this.x,y:this.y-12.5},this.out={x:this.x,y:this.y+12.5};else if(180===a||-180===a)this.in={x:this.x,y:this.y+12.5},this.out={x:this.x,y:this.y-12.5};else if(-90==a||-270===a)this.in={x:this.x-12.5,y:this.y},this.out={x:this.x+12.5,y:this.y};else if(90==a||-270===a)this.in={x:this.x+12.5,y:this.y},this.out=
{x:this.x-12.5,y:this.y};console.log("calculating",this.in,this.out)};b.prototype.rotateLeft=function(){this.rotation-=90;this.calculateTerminals()};b.prototype.rotateRight=function(){this.rotation+=90;this.calculateTerminals()};b.prototype.flip=function(){this.rotation+=180;this.calculateTerminals()};b.prototype.place=function(a,b){this.x=a;this.y=b;this.calculateTerminals()};b.prototype.render=function(a){var b=this;a.selectAll("div").data([15,30,15,30,15,30]).enter().append("svg:path").attr("d",
function(a,d){return"M "+(b.x+-7*(d%2)-7.5)+" "+(b.y+5*d-12.5)+" l "+a+" 0"}).attr("transform","rotate("+b.rotation+" "+b.x+", "+b.y+")").attr("class","zap-line component");var c=b.rotation%360,e=b.x,f=b.y;if(0===c)e+=20,f+=5;else if(180===c||-180===c)e-=50,f+=5;else if(-90==c||-270===c)e-=10,f-=25;else if(90==c||-270===c)e-=15,f+=35;a.append("text").attr("class","zap-label").attr("transform","translate("+e+","+f+")").text(b.voltage+"V");return this};b.prototype.inWire=function(){console.log("in",
{obj:this,wire:"in"});return{obj:this,wire:"in"}};b.prototype.outWire=function(){return{obj:this,wire:"out"}}};c.prototype.createBattery=function(a){return new b(a)}})(Zap);(function(c){var b=function(a,b){this.capacitance=a;this.w=b.baseWidth;this.h=b.baseHeight};b.prototype.render=function(a){a=a.append("svg").attr("width",this.w).attr("height",this.h);a.selectAll("div").data([40,40]).enter().append("svg:path").attr("d",function(a,b){return"M "+(100+20*(b%2))+" 0 l 0 30"}).attr("class","zap-line component");a.append("text").attr("class","zap-label").attr("transform","translate(80,50)").text(this.capacitance+"F");return this};c.prototype.createCapacitor=function(a){return new b(a,
this)}})(Zap);(function(c){var b=function(a){this.w=a.baseWidth;this.h=a.baseHeight};b.prototype.render=function(a){a.append("svg").attr("width",this.w).attr("height",this.h).selectAll("div").data([30,20,10]).enter().append("svg:path").attr("d",function(a,b){return"M "+(100+5*b)+" "+(100+5*b)+" l "+a+" 0"}).attr("class","zap-line component");return this};c.prototype.createGround=function(){return new b(this)}})(Zap);(function(c){var b=function(a,b){this.model=a;this.w=b.baseWidth;this.h=b.baseHeight};b.prototype.render=function(a){a=a.append("svg").attr("width",this.w).attr("height",this.h);a.append("path").attr("d",function(){return"M 100 100 l 40 25 l -40 25 z"}).attr("class","zap-line component");a.append("text").attr("class","zap-label").attr("transform","translate(120,130)").text(this.model);return this};c.prototype.createOpAmp=function(a){return new b(a,this)}})(Zap);(function(c){var b=function(a,b){this.resistance=a;this.w=b.baseWidth;this.h=b.baseHeight};b.prototype.render=function(a){a=a.append("svg").attr("width",this.w).attr("height",this.h);a.append("svg:path").attr("d",function(){return"M 100 100 l 10 0 l 5 10 l 10 -20 l 10 20 l 10 -20 l 10 20 l 5 -10 l 10 0"}).attr("class","zap-line component");a.append("text").attr("class","zap-label").attr("transform","translate(120,130)").text(this.resistance+"\u2126");return this};c.prototype.createResistor=function(a){return new b(a,
this)}})(Zap);(function(c){var b=function(a,b){this.comp1=a;this.comp2=b;this.intersections=[]};b.prototype.render=function(a){console.log("end",this.comp2.wire);var b=this.comp1.obj[this.comp1.wire],c=this.comp2.obj[this.comp2.wire];this.intersections.forEach(function(c){var e=c.x,f=c.y;a.append("svg:path").attr("d",function(){return"M "+b.x+" "+b.y+" l "+(e-b.x)+" "+(f-b.y)}).attr("class","zap-line component");b={x:e,y:f}});a.append("svg:path").attr("d",function(){console.log("wire path",b,c);return"M "+b.x+
" "+b.y+" l "+(c.x-b.x)+" "+(c.y-b.y)}).attr("class","zap-line component");return this};b.prototype.intersect=function(a,b){this.intersections.push({x:a,y:b})};c.prototype.connect=function(a,c){return new b(a,c)}})(Zap);})();
